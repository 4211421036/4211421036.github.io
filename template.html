<!DOCTYPE html>
<html lang="en">

<head>
    <title>Web Page Application Store Github</title>
    <meta charset="UTF-8">
    <link href=/manifest.json rel=manifest crossorigin=use-credentials>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="This is collation application created by GALIH RIDHO UTOMO ">
    <meta name="keywords" content="HTML, CSS, JavaScript, Web Development, SEO">
    <meta name="author" content="GALIH RIDHO UTOMO">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Web Page">
    <meta property="og:description" content="This is collation application created by GALIH RIDHO UTOMO ">
    <meta property="og:image" content="http://4211421036.github.io/345677.png">
    <meta property="og:url" content="http://4211421036.github.io">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="google-site-verification" content="OYdjPwgIjGMAbQd3CGwM_l20jLNRRp84mEl3kw06DMg" />
    <meta name="twitter:title" content="Web Page">
    <meta name="twitter:description" content="This is collation application created by GALIH RIDHO UTOMO ">
    <meta name="twitter:image" content="http://4211421036.github.io/345677.png">
    <link rel="canonical" href="http://4211421036.github.io">
    <link href="/style.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="icon" href="https://4211421036.github.io/g4lihru/987654567.png" type="image/x-icon">
    <link rel="alternate" media="only screen and (max-width: 640px)" href="https://4211421036.github.io/mobile/" />
    <script type src="/theme.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            if (window.innerWidth < 720) {
                document.head.innerHTML += '<meta http-equiv="refresh" content="0;url=https://4211421036.github.io/mobile">';
            }
        });
    </script>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NN8S46CR');</script>
<!-- End Google Tag Manager -->
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NN8S46CR"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <div id="splash-screen"
        style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--background-colors); display: flex; align-items: center; justify-content: center; z-index: 1000;">
        <img src="https://4211421036.github.io/g4lihru/987654567.png" alt="Logo"
            style="width: 150px; height: 150px; background: white; border-radius: 25px;">
    </div>
    <script>
        // Hide splash screen after 3 seconds
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('splash-screen').style.display = 'none';
            }, 500);
        });
    </script>
    <div class="sidebar">
        <div class="sidebar-item" data-link="home" title="Home">
            <i class="fas fa-home"></i>
            <div class="tooltip">Home</div>
        </div>
        <div class="sidebar-item" data-link="download" title="Download">
            <i class="fas fa-download"></i>
            <div class="tooltip">Download</div>
        </div>
        <div class="sidebar-item" data-link="book" title="Book">
            <i class="fas fa-book"></i>
            <div class="tooltip">Book</div>
        </div>
    </div>
    <script src="sdb.js"></script>
    <div class="content">
        <div class="carousel">
            <div class="carousel-track">
                <div class="carousel-item carousel-item1">
                    <img alt="Breaking Bad character sitting in a warehouse" height="400"
                        src="https://storage.googleapis.com/a1aa/image/4nEokJjhM5BSY-67rsqe5y5OEcmEm9NrBYSznVlLGYE.jpg"
                        width="800" style="border-radius: 15px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);" />
                    <div class="overlay" style="border-radius: 15px; backdrop-filter: blur(2px);">
                        <h2 style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">Weekend flash sale</h2>
                        <p style="text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">Save on Breaking Bad and Better Call Saul
                        </p>
                        <button>See details</button>
                    </div>
                </div>
                <div class="carousel-item carousel-item2">
                    <img alt="Entertainment apps logos" height="400"
                        src="https://storage.googleapis.com/a1aa/image/PAt2D3Ex_73tkQj2pJVZsorEX-Q-vMScs0EC3h_s1i0.jpg"
                        width="800" style="border-radius: 15px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);" />
                    <div class="overlay" style="border-radius: 15px; backdrop-filter: blur(2px);">
                        <h2 style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">Best entertainment apps</h2>
                        <button>See details</button>
                    </div>
                </div>
                <div class="carousel-item carousel-item3">
                    <img alt="Microsoft Solitaire Collection: Gravity Blocks" height="400"
                        src="https://storage.googleapis.com/a1aa/image/0gpp5Rhk776fbWIxFb8YfzVZ74sWv1QbUGBTG2S6fvU.jpg"
                        width="800" style="border-radius: 15px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);" />
                    <div class="overlay" style="border-radius: 15px; backdrop-filter: blur(2px);">
                        <h2>Microsoft Solitaire Collection: Gravity Blocks</h2>
                        <button>See details</button>
                    </div>
                </div>
            </div>
            <div class="carousel-nav">
                <button class="carousel-prev">&lt;</button>
                <button class="carousel-next">&gt;</button>
            </div>
        </div>
        <div class="section-title">Aplikasi yang di Buat</div>
        <div style="position: relative;">
            <div class="card-container" id="github-repos"></div>
            <div class="repo-nav">
                <button class="repo-prev">&lt;</button>
                <button class="repo-next">&gt;</button>
            </div>
        </div>
    </div>
    <script>
        // Function to fetch GitHub repos
        async function fetchGitHubRepos() {
            try {
                const response = await fetch('https://api.github.com/users/4211421036/repos');
                const repos = await response.json();
                const container = document.getElementById('github-repos');

                repos.forEach(repo => {
                    const card = document.createElement('div');
                    card.className = 'card';

                    card.innerHTML = `
            <img alt="GitHub" height="200" 
                src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" 
                width="150"/>
            <p>${repo.name}</p>
            <p class="free">${repo.language || 'No language'}</p>
            <p style="font-size: 12px">${repo.description || ''}</p>
            <a class="linkc" href="${repo.html_url}" target="_blank" 
            style="color: #2d6cdf; text-decoration: none;">View Repository</a>
            `;

                    container.appendChild(card);
                });
            } catch (error) {
                console.error('Error fetching GitHub repos:', error);
            }
        }

        // Function to handle card navigation
        function handleCardNavigation(direction) {
            const container = document.getElementById('github-repos');
            const cards = Array.from(container.children);
            if (direction === 'next') {
                container.appendChild(cards[0]);
            } else {
                container.insertBefore(cards[cards.length - 1], cards[0]);
            }
        }

        // Event listeners for navigation buttons
        document.querySelector('.repo-next').addEventListener('click', () => handleCardNavigation('next'));
        document.querySelector('.repo-prev').addEventListener('click', () => handleCardNavigation('prev'));

        // Call the function when page loads
        fetchGitHubRepos();
    </script>
    <script>
        const track = document.querySelector('.carousel-track');
        const items = Array.from(track.children);
        const nextButton = document.querySelector('.carousel-next');
        const prevButton = document.querySelector('.carousel-prev');
        let currentIndex = 0;

        // Function to update carousel position
        function updateCarousel() {
            const itemWidth = items[currentIndex].getBoundingClientRect().width;
            track.style.transform = `translateX(-${currentIndex * itemWidth}px)`;
        }

        // Function to fetch GitHub repositories
        async function fetchGitHubRepos(username) {
            const response = await fetch(`https://api.github.com/users/4211421036/repos`);
            if (!response.ok) throw new Error('Failed to fetch GitHub repositories');
            return response.json();
        }

        // Function to fetch repository image
        async function fetchRepoImage(repo) {
            const response = await fetch(`https://api.github.com/repos/${repo.full_name}/contents`);
            if (!response.ok) throw new Error('Failed to fetch repository contents');
            const contents = await response.json();
            const imageFile = contents.find(file => file.type === 'file' && /\.(jpg|jpeg|png|gif)$/i.test(file.name));
            return imageFile ? imageFile.download_url : 'https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png';
        }

        // Function to update carousel content with GitHub data
        async function updateCarouselContent() {
            try {
                const repos = await fetchGitHubRepos('4211421036'); // Replace with your GitHub username
                for (let i = 0; i < items.length; i++) {
                    if (i >= repos.length) break;
                    const repo = repos[i];
                    const imageUrl = await fetchRepoImage(repo);

                    items[i].setAttribute('data-name', repo.name);
                    items[i].setAttribute('data-description', repo.description || 'No description available');
                    items[i].setAttribute('data-url', repo.html_url);
                    items[i].setAttribute('data-image', imageUrl);

                    items[i].innerHTML = `
                        <img src="${imageUrl}" alt="${repo.name}">
                        <div class="overlay">
                            <h2>${repo.name}</h2>
                            <p>${repo.description || 'No description available'}</p>
                            <button>
                                <a class="linkp" href="${repo.html_url}" target="_blank">View Repository</a>
                            </button>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error fetching GitHub data:', error);
            }
        }

        // Function to swap content (circular shift)
        function swapContent(direction) {
            if (direction === 'next') {
                const firstItem = {
                    name: items[0].getAttribute('data-name'),
                    description: items[0].getAttribute('data-description'),
                    url: items[0].getAttribute('data-url'),
                    image: items[0].getAttribute('data-image')
                };
                for (let i = 0; i < items.length - 1; i++) {
                    items[i].setAttribute('data-name', items[i + 1].getAttribute('data-name'));
                    items[i].setAttribute('data-description', items[i + 1].getAttribute('data-description'));
                    items[i].setAttribute('data-url', items[i + 1].getAttribute('data-url'));
                    items[i].setAttribute('data-image', items[i + 1].getAttribute('data-image'));
                    items[i].innerHTML = items[i + 1].innerHTML;
                }
                items[items.length - 1].setAttribute('data-name', firstItem.name);
                items[items.length - 1].setAttribute('data-description', firstItem.description);
                items[items.length - 1].setAttribute('data-url', firstItem.url);
                items[items.length - 1].setAttribute('data-image', firstItem.image);
                items[items.length - 1].innerHTML = `
                    <img src="${firstItem.image}" alt="${firstItem.name}">
                    <div class="overlay">
                        <h2>${firstItem.name}</h2>
                        <p>${firstItem.description}</p>
                        <button>
                            <a class="linkp" href="${firstItem.url}" target="_blank">View Repository</a>
                        </button>
                    </div>
                `;
            } else {
                const lastItem = {
                    name: items[items.length - 1].getAttribute('data-name'),
                    description: items[items.length - 1].getAttribute('data-description'),
                    url: items[items.length - 1].getAttribute('data-url'),
                    image: items[items.length - 1].getAttribute('data-image')
                };
                for (let i = items.length - 1; i > 0; i--) {
                    items[i].setAttribute('data-name', items[i - 1].getAttribute('data-name'));
                    items[i].setAttribute('data-description', items[i - 1].getAttribute('data-description'));
                    items[i].setAttribute('data-url', items[i - 1].getAttribute('data-url'));
                    items[i].setAttribute('data-image', items[i - 1].getAttribute('data-image'));
                    items[i].innerHTML = items[i - 1].innerHTML;
                }
                items[0].setAttribute('data-name', lastItem.name);
                items[0].setAttribute('data-description', lastItem.description);
                items[0].setAttribute('data-url', lastItem.url);
                items[0].setAttribute('data-image', lastItem.image);
                items[0].innerHTML = `
                    <img src="${lastItem.image}" alt="${lastItem.name}">
                    <div class="overlay">
                        <h2>${lastItem.name}</h2>
                        <p>${lastItem.description}</p>
                        <button>
                            <a class="linkp" href="${lastItem.url}" target="_blank">View Repository</a>
                        </button>
                    </div>
                `;
            }
        }

        // Event listeners for navigation buttons
        nextButton.addEventListener('click', () => {
            swapContent('next');
        });

        prevButton.addEventListener('click', () => {
            swapContent('prev');
        });

        // Load carousel content when the page loads
        document.addEventListener('DOMContentLoaded', async () => {
            await updateCarouselContent();
            updateCarousel();
        });
        function getRandomClassName(length = 8) {
    const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    let result = '';
    for (let i = 0; i < length; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    return result;
}

// Generate random class names for CSS
const classNames = {
    container: getRandomClassName(),
    categorySection: getRandomClassName(),
    categoryTitle: getRandomClassName(),
    categoryIcon: getRandomClassName(),
    allCategoriesLink: getRandomClassName(),
    cardsContainer: getRandomClassName(),
    card: getRandomClassName(),
    cardImage: getRandomClassName(),
    cardContent: getRandomClassName(),
    cardTitle: getRandomClassName(),
    cardDescription: getRandomClassName(),
    cardMeta: getRandomClassName(),
    cardDate: getRandomClassName(),
    modal: getRandomClassName(),
    modalContent: getRandomClassName(),
    modalHeader: getRandomClassName(),
    modalTitle: getRandomClassName(),
    modalClose: getRandomClassName(),
    modalBack: getRandomClassName(),
    modalBody: getRandomClassName(),
    categoriesGrid: getRandomClassName(),
    categoryCard: getRandomClassName(),
    categoryCardIcon: getRandomClassName(),
    categoryCardTitle: getRandomClassName(),
    categoryCardCount: getRandomClassName(),
    clipContainer: getRandomClassName(),
    clip: getRandomClassName()
};

// Inject CSS
const styleElement = document.createElement('style');
styleElement.textContent = `
    /* Auto Dark/Light Theme */
@media (prefers-color-scheme: dark) {
    :root {
        --background-colors: #1e1e1e;
        --text-colors: #ffffff;
        --card-backgrounds: #1f2227;
        --card-hover-backgrounds: #3d3d3d;
        --border-colors: #444;
        --primary-colors: #ffffff;
        --primary-hover-colors: #0056b3;
        --clip-backgrounds: #2d3a57;
        --clip-hover-backgrounds: #555;
    }
}

@media (prefers-color-scheme: light) {
    :root {
        --background-colors: #f5f5f5;
        --text-colors: #333;
        --card-backgrounds: #ffffff;
        --card-hover-backgrounds: #f0f0f0;
        --border-colors: #ddd;
        --primary-colors: #007bff;
        --primary-hover-colors: #0056b3;
        --clip-backgrounds: #e0e0e0;
        --clip-hover-backgrounds: #d0d0d0;
    }
}

/* Global Styles */
.${classNames.container} {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    padding: 20px;
    background-color: var(--background-colors);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: var(--text-colors);
}

.${classNames.allCategoriesLink} {
    width: 100%;
    display: flex;
    justify-content: flex-end;
    align-items: center;
    margin-bottom: 15px;
    font-weight: bold;
    cursor: pointer;
    color: var(--primary-colors);
    transition: color 0.3s ease;
}

.${classNames.allCategoriesLink}:hover {
    color: var(--primary-hover-colors);
}

.${classNames.categorySection} {
    flex: 1;
    min-width: 300px;
    background-color: var(--card-backgrounds);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    padding: 20px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.${classNames.categorySection}:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
}

.${classNames.categoryTitle} {
    display: flex;
    align-items: center;
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 15px;
    color: var(--text-colors);
}

.${classNames.categoryIcon} {
    margin-left: 10px;
    cursor: pointer;
    color: var(--primary-colors);
    transition: color 0.3s ease;
}

.${classNames.categoryIcon}:hover {
    color: var(--primary-hover-colors);
}

.${classNames.cardsContainer} {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.${classNames.card} {
    display: flex;
    border-bottom: 1px solid var(--border-colors);
    padding-bottom: 15px;
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.${classNames.card}:last-child {
    border-bottom: none;
}

.${classNames.card}:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.${classNames.cardImage} {
    width: 80px;
    height: 80px;
    border-radius: 8px;
    object-fit: cover;
    margin-right: 15px;
}

.${classNames.cardContent} {
    flex: 1;
}

.${classNames.cardTitle} {
    font-weight: bold;
    margin-bottom: 5px;
    color: var(--text-colors);
}

.${classNames.cardDescription} {
    font-size: 14px;
    color: var(--text-colors);
    margin-bottom: 8px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.${classNames.cardMeta} {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: var(--text-colors);
}

.${classNames.modal} {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    overflow-y: auto;
}

.${classNames.modalContent} {
    background-color: var(--card-backgrounds);
    margin: 50px auto;
    width: 90%;
    max-width: 1000px;
    border-radius: 12px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.${classNames.modalHeader} {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    border-bottom: 1px solid var(--border-colors);
}

.${classNames.modalTitle} {
    font-size: 20px;
    font-weight: bold;
    color: var(--text-colors);
}

.${classNames.modalClose} {
    font-size: 24px;
    cursor: pointer;
    color: var(--text-colors);
    transition: color 0.3s ease;
}

.${classNames.modalClose}:hover {
    color: var(--primary-colors);
}

.${classNames.modalBack} {
    font-size: 16px;
    cursor: pointer;
    color: var(--primary-colors);
    display: none;
    align-items: center;
    margin-right: auto;
    transition: color 0.3s ease;
}

.${classNames.modalBack}:hover {
    color: var(--primary-hover-colors);
    text-decoration: underline;
}

.${classNames.modalBody} {
    padding: 20px;
}

.${classNames.categoriesGrid} {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
}

.${classNames.categoryCard} {
    background-color: var(--card-backgrounds);
    border-radius: 12px;
    padding: 20px;
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.${classNames.categoryCard}:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
}

.${classNames.categoryCardIcon} {
    font-size: 30px;
    margin-bottom: 10px;
    color: var(--primary-colors);
}

.${classNames.categoryCardTitle} {
    font-weight: bold;
    font-size: 18px;
    margin-bottom: 5px;
    color: var(--text-colors);
}

.${classNames.categoryCardCount} {
    color: var(--text-colors);
    font-size: 14px;
}

.${classNames.clipContainer} {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    margin-top: 10px;
}

.${classNames.clip} {
    font-size: 12px;
    padding: 5px 10px;
    border-radius: 15px;
    background-color: var(--clip-backgrounds);
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.3s ease;
}

.${classNames.clip}:hover {
    background-color: var(--clip-hover-backgrounds);
    transform: translateY(-2px);
}
`;
document.head.appendChild(styleElement);

// Map language names to icons/emojis
const languageIcons = {
    'python': '🐍',
    'javascript': '📜',
    'typescript': '📘',
    'html': '🌐',
    'css': '🎨',
    'php': '🐘',
    'java': '☕',
    'kotlin': '📱',
    'swift': '🍎',
    'c#': '♯',
    'c++': '⚙️',
    'c': '🔧',
    'ruby': '💎',
    'go': '🐹',
    'rust': '🦀',
    'dart': '🎯',
    'other': '📦'
};

// Function to detect programming languages from repository
function detectLanguages(repo) {
    const languages = [];
    const name = repo.name.toLowerCase();
    const description = (repo.description || '').toLowerCase();
    
    // Check language using repo name, description, and actual language
    const langMap = {
        'python': ['python', 'django', 'flask', 'py'],
        'javascript': ['javascript', 'js', 'node', 'react', 'vue', 'angular'],
        'typescript': ['typescript', 'ts'],
        'html': ['html', 'web'],
        'css': ['css', 'style', 'scss', 'sass'],
        'php': ['php', 'laravel', 'symfony', 'wordpress', 'wp'],
        'java': ['java', 'spring', 'android'],
        'kotlin': ['kotlin', 'android'],
        'swift': ['swift', 'ios'],
        'c#': ['c#', 'csharp', '.net', 'dotnet'],
        'c++': ['c++', 'cpp'],
        'c': ['c language'],
        'ruby': ['ruby', 'rails'],
        'go': ['golang', 'go'],
        'rust': ['rust', 'rs'],
        'dart': ['dart', 'flutter']
    };
    
    // Push the actual language if provided by GitHub
    if (repo.language && repo.language.toLowerCase() !== 'null') {
        languages.push(repo.language.toLowerCase());
    }
    
    // Detect languages from name and description
    for (const [lang, keywords] of Object.entries(langMap)) {
        for (const keyword of keywords) {
            if (name.includes(keyword) || description.includes(keyword)) {
                if (!languages.includes(lang)) {
                    languages.push(lang);
                }
            }
        }
    }
    
    // If no language detected, mark as "other"
    if (languages.length === 0) {
        languages.push('other');
    }
    
    return languages;
}

// Function to calculate language percentages in a repository
function calculateLanguagePercentages(repo) {
    const languages = detectLanguages(repo);
    const totalLanguages = languages.length;
    const percentages = {};

    languages.forEach(lang => {
        percentages[lang] = (100 / totalLanguages).toFixed(1);
    });

    return percentages;
}

// Function to create a clip element
function createClipElement(lang, percentage) {
    const clip = document.createElement('div');
    clip.className = classNames.clip;
    clip.textContent = `${lang} ${percentage}%`;
    clip.addEventListener('click', () => {
        showCategoryRepos(lang);
    });
    return clip;
}

// Function to categorize repositories by programming language
function categorizeRepositoriesByLanguage(repos) {
    const categorized = {};
    
    repos.forEach(repo => {
        const languages = detectLanguages(repo);
        
        languages.forEach(lang => {
            if (!categorized[lang]) {
                categorized[lang] = [];
            }
            
            // Avoid duplicate repositories in the same category
            if (!categorized[lang].some(r => r.id === repo.id)) {
                categorized[lang].push(repo);
            }
        });
    });
    
    return categorized;
}

// Format date to relative time (e.g., "2 days ago")
function formatRelativeTime(dateString) {
    const date = new Date(dateString);
    const now = new Date();
    const diffMs = now - date;
    const diffSeconds = Math.floor(diffMs / 1000);
    const diffMinutes = Math.floor(diffSeconds / 60);
    const diffHours = Math.floor(diffMinutes / 60);
    const diffDays = Math.floor(diffHours / 24);
    
    if (diffDays > 0) {
        return `${diffDays} hari lalu`;
    } else if (diffHours > 0) {
        return `${diffHours} jam lalu`;
    } else if (diffMinutes > 0) {
        return `${diffMinutes} menit lalu`;
    } else {
        return 'baru saja';
    }
}

// Function to capitalize first letter
function capitalizeFirstLetter(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
}

// Function to create a repository card element
function createRepoCard(repo) {
    const card = document.createElement('div');
    card.className = classNames.card;
    
    // Create card image
    const image = document.createElement('img');
    image.className = classNames.cardImage;
    image.src = repo.owner.avatar_url; // Use owner avatar as default image
    image.alt = repo.name;
    
    // Create card content
    const content = document.createElement('div');
    content.className = classNames.cardContent;
    
    // Create card title
    const title = document.createElement('div');
    title.className = classNames.cardTitle;
    title.textContent = repo.name;
    
    // Create card description
    const description = document.createElement('div');
    description.className = classNames.cardDescription;
    description.textContent = repo.description || 'No description available';
    
    // Create card meta info
    const meta = document.createElement('div');
    meta.className = classNames.cardMeta;
    
    const date = document.createElement('div');
    date.className = classNames.cardDate;
    date.textContent = formatRelativeTime(repo.created_at);
    
    meta.appendChild(date);
    
    // Append elements
    content.appendChild(title);
    content.appendChild(description);
    content.appendChild(meta);
    
    card.appendChild(image);
    card.appendChild(content);
    
    // Add click event to navigate to the repository
    card.addEventListener('click', () => {
        window.open(repo.html_url, '_blank');
    });
    
    return card;
}

// Create a modal
function createModal() {
    const modal = document.createElement('div');
    modal.className = classNames.modal;
    modal.id = 'repoModal';
    
    const modalContent = document.createElement('div');
    modalContent.className = classNames.modalContent;
    
    const modalHeader = document.createElement('div');
    modalHeader.className = classNames.modalHeader;
    
    const modalBack = document.createElement('div');
    modalBack.className = classNames.modalBack;
    modalBack.id = 'modalBack';
    modalBack.innerHTML = '&larr; Back to Categories';
    modalBack.addEventListener('click', () => {
        showAllCategories();
    });
    
    const modalTitle = document.createElement('div');
    modalTitle.className = classNames.modalTitle;
    modalTitle.id = 'modalTitle';
    
    const modalClose = document.createElement('div');
    modalClose.className = classNames.modalClose;
    modalClose.innerHTML = '&times;';
    modalClose.addEventListener('click', () => {
        modal.style.display = 'none';
        resetModal();
    });
    
    const modalBody = document.createElement('div');
    modalBody.className = classNames.modalBody;
    modalBody.id = 'modalBody';
    
    modalHeader.appendChild(modalBack);
    modalHeader.appendChild(modalTitle);
    modalHeader.appendChild(modalClose);
    
    modalContent.appendChild(modalHeader);
    modalContent.appendChild(modalBody);
    
    modal.appendChild(modalContent);
    
    // Close modal when clicking outside the content
    modal.addEventListener('click', (event) => {
        if (event.target === modal) {
            modal.style.display = 'none';
            resetModal();
        }
    });
    
    return modal;
}

// Reset modal to default state
function resetModal() {
    const modalBack = document.getElementById('modalBack');
    if (modalBack) {
        modalBack.style.display = 'none';
    }
}

// Show all categories in the modal
function showAllCategories() {
    const modalBack = document.getElementById('modalBack');
    const modalTitle = document.getElementById('modalTitle');
    const modalBody = document.getElementById('modalBody');
    
    // Hide back button when showing all categories
    modalBack.style.display = 'none';
    
    // Set modal title
    modalTitle.textContent = 'All Programming Languages';
    
    // Clear previous content
    modalBody.innerHTML = '';
    
    // Create a grid for categories
    const categoriesGrid = document.createElement('div');
    categoriesGrid.className = classNames.categoriesGrid;
    
    // Get all categories from window.categorizedRepos
    const categories = Object.keys(window.categorizedRepos).sort((a, b) => {
        if (a === 'other') return 1;
        if (b === 'other') return -1;
        return a.localeCompare(b);
    });
    
    categories.forEach(category => {
        const repos = window.categorizedRepos[category];
        if (!repos || repos.length === 0) return;
        
        // Create category card
        const categoryCard = document.createElement('div');
        categoryCard.className = classNames.categoryCard;
        
        // Add icon
        const icon = document.createElement('div');
        icon.className = classNames.categoryCardIcon;
        icon.textContent = languageIcons[category] || '📦';
        
        // Add title
        const title = document.createElement('div');
        title.className = classNames.categoryCardTitle;
        title.textContent = capitalizeFirstLetter(category);
        
        // Add count
        const count = document.createElement('div');
        count.className = classNames.categoryCardCount;
        count.textContent = `${repos.length} repositories`;
        
        categoryCard.appendChild(icon);
        categoryCard.appendChild(title);
        categoryCard.appendChild(count);
        
        // Add click event to show repositories for this category
        categoryCard.addEventListener('click', () => {
            showCategoryRepos(category);
        });
        
        categoriesGrid.appendChild(categoryCard);
    });
    
    modalBody.appendChild(categoriesGrid);
    
    // Show modal
    document.getElementById('repoModal').style.display = 'block';
}

// Show repositories for a specific category
function showCategoryRepos(category) {
    const modalBack = document.getElementById('modalBack');
    const modalTitle = document.getElementById('modalTitle');
    const modalBody = document.getElementById('modalBody');
    
    // Show back button
    modalBack.style.display = 'flex';
    
    // Set modal title
    modalTitle.textContent = `${capitalizeFirstLetter(category)} Repositories`;
    
    // Clear previous content
    modalBody.innerHTML = '';
    
    // Get repos for this category
    const repos = window.categorizedRepos[category];
    
    // Sort repositories by updated_at
    repos.sort((a, b) => new Date(b.updated_at) - new Date(a.updated_at));
    
    // Add repos to modal
    repos.forEach(repo => {
        const card = createRepoCard(repo);
        modalBody.appendChild(card);

        // Calculate language percentages
        const percentages = calculateLanguagePercentages(repo);

        // Create clips for each language
        const clipsContainer = document.createElement('div');
        clipsContainer.className = classNames.clipContainer;

        Object.entries(percentages).forEach(([lang, percentage]) => {
            const clip = createClipElement(lang, percentage);
            clipsContainer.appendChild(clip);
        });

        modalBody.appendChild(clipsContainer);
    });
}

// Function to create the UI based on categorized repositories
function createRepoCards(categorizedRepos) {
    // Store categorized repos globally for modal access
    window.categorizedRepos = categorizedRepos;
    
    // Create container
    const container = document.createElement('div');
    container.className = classNames.container;
    
    // Create a modal
    const modal = createModal();
    document.body.appendChild(modal);
    
    // Create "All Categories" link
    const allCategoriesLink = document.createElement('div');
    allCategoriesLink.className = classNames.allCategoriesLink;
    allCategoriesLink.textContent = 'All Programming Languages ';
    
    const icon = document.createElement('span');
    icon.textContent = '❯';
    allCategoriesLink.appendChild(icon);
    
    allCategoriesLink.addEventListener('click', () => {
        showAllCategories();
    });
    
    container.appendChild(allCategoriesLink);
    
    // Get categories and sort by repository count
    const categories = Object.keys(categorizedRepos).sort((a, b) => {
        if (a === 'other') return 1;
        if (b === 'other') return -1;
        return categorizedRepos[b].length - categorizedRepos[a].length;
    });
    
    // Take only the top 3 categories
    const topCategories = categories.slice(0, 3);
    
    // Create sections for top categories
    topCategories.forEach(category => {
        const repos = categorizedRepos[category];
        if (!repos || repos.length === 0) return;
        
        // Sort repositories by updated_at
        repos.sort((a, b) => new Date(b.updated_at) - new Date(a.updated_at));
        
        // Create category section
        const section = document.createElement('div');
        section.className = classNames.categorySection;
        
        // Create category title
        const titleContainer = document.createElement('div');
        titleContainer.className = classNames.categoryTitle;
        titleContainer.textContent = capitalizeFirstLetter(category) + ' ';
        
        const titleIcon = document.createElement('span');
        titleIcon.className = classNames.categoryIcon;
        titleIcon.textContent = '❯';
        titleContainer.appendChild(titleIcon);
        
        // Add click event to show all repositories in this category
        titleIcon.addEventListener('click', () => {
            showCategoryRepos(category);
            document.getElementById('repoModal').style.display = 'block';
        });
        
        section.appendChild(titleContainer);
        
        // Create cards container
        const cardsContainer = document.createElement('div');
        cardsContainer.className = classNames.cardsContainer;
        
        // Take first 3 repositories for this category
        repos.slice(0, 3).forEach(repo => {
            const card = createRepoCard(repo);
            cardsContainer.appendChild(card);
        });
        
        section.appendChild(cardsContainer);
        container.appendChild(section);
    });
    
    return container;
}

// Function to fetch GitHub repositories
async function fetchGitHubRepos(username) {
    const response = await fetch(`https://api.github.com/users/${username}/repos?per_page=100`);
    if (!response.ok) throw new Error('Failed to fetch GitHub repositories');
    return response.json();
}

// Initialize the UI
async function initializeUI(username) {
    try {
        // Get the existing carousel elements
        const carouselContainer = document.querySelector('.carousel-track').parentElement;
        
        // Fetch repositories
        const repos = await fetchGitHubRepos(username);
        
        // Categorize repositories by programming language
        const categorizedRepos = categorizeRepositoriesByLanguage(repos);
        
        // Create UI
        const repoCardsContainer = createRepoCards(categorizedRepos);
        
        // Insert the new UI after the carousel
        if (carouselContainer.nextElementSibling) {
            carouselContainer.parentElement.insertBefore(repoCardsContainer, carouselContainer.nextElementSibling);
        } else {
            carouselContainer.parentElement.appendChild(repoCardsContainer);
        }
        
    } catch (error) {
        console.error('Error initializing repository cards:', error);
    }
}

// Initialize when the document is loaded
document.addEventListener('DOMContentLoaded', () => {
    // Use the same GitHub username from the carousel code
    initializeUI('4211421036');
});

// Integrate with existing carousel functionality
const existingTrack = document.querySelector('.carousel-track');
const existingItems = Array.from(existingTrack.children);
const existingNextButton = document.querySelector('.carousel-next');
const existingPrevButton = document.querySelector('.carousel-prev');
let existingCurrentIndex = 0;
    </script>
     <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('Service Worker registered with scope: ', registration.scope);
                    })
                    .catch(error => {
                        console.error('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>

</html>
